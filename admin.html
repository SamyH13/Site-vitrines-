<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin ‚Äî March√© Provence</title>
  <link rel="stylesheet" href="styles.css" />
  <meta name="robots" content="noindex,nofollow" />
  <style>
    .admin{max-width:1100px;margin:auto;padding:20px}
    .cardA{background:#fff;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.08);padding:16px;margin:16px 0}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .row input,.row select,.row textarea{padding:10px;border:1px solid #ddd;border-radius:8px}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border-bottom:1px solid #eee;padding:8px;vertical-align:top}
    .table th{background:#faf7ef;text-align:left}
    .thumb{width:70px;height:70px;object-fit:cover;border-radius:8px;border:1px solid #eee}
    .pill{padding:2px 8px;border-radius:999px;font-size:.85rem;background:#eee}
    .ok{background:#dff5e1}.annule{background:#ffe3e3}
    .btn.small{padding:6px 10px;font-size:.9rem}
  </style>
</head>
<body>
  <!-- m√™me navbar que le site -->
  <header>
    <nav class="navbar container">
      <a class="logo" href="index.html"><img src="assets/logo.png" alt="March√© Provence" /></a>
      <ul class="nav-links">
        <li><a href="produits.html">Produits</a></li>
        <li><a href="marches.html">Prochains March√©s</a></li>
        <li><a href="avis.html">Avis Clients</a></li>
        <li><a href="Id√©es.html">Id√©es & Sondages</a></li>
      </ul>
    </nav>
  </header>

  <main class="admin">
    <h1>Espace administration</h1>

    <!-- Connexion -->
    <div class="cardA" id="loginBox">
      <h2>Connexion</h2>
      <div class="row">
        <input id="email" type="email" placeholder="Email admin" />
        <input id="pass" type="password" placeholder="Mot de passe" />
        <button class="btn" id="btnLogin">Se connecter</button>
      </div>
      <small>Utilise l‚Äôutilisateur cr√©√© dans Firebase Authentication.</small>
    </div>

    <!-- Dashboard -->
    <div class="cardA" id="dash" style="display:none">
      <div class="row" style="justify-content:space-between">
        <h2>Tableau de bord</h2>
        <button class="btn" id="btnLogout">Se d√©connecter</button>
      </div>

      <!-- PRODUITS -->
      <section class="cardA">
        <h3>üì¶ Produits</h3>
        <form id="formProduct" class="row">
          <input name="name" placeholder="Nom" required />
          <input name="price" type="number" step="0.01" placeholder="Prix (‚Ç¨)" />
          <input name="stock" type="number" min="0" placeholder="Stock" />
          <textarea name="desc" rows="2" placeholder="Description"></textarea>
          <label class="row" style="gap:6px">Photo
            <input name="photo" type="file" accept="image/*" />
          </label>
          <button class="btn">Ajouter</button>
        </form>

        <table class="table" style="margin-top:12px">
          <thead><tr>
            <th>Photo</th><th>Nom</th><th>Prix</th><th>Stock</th><th>Actif</th><th>Actions</th>
          </tr></thead>
          <tbody id="productsList"></tbody>
        </table>
      </section>

      <!-- MARCH√âS -->
      <section class="cardA">
        <h3>üõçÔ∏è Prochains March√©s</h3>
        <form id="formMarket" class="row">
          <input name="date" type="date" required />
          <input name="city" placeholder="Ville" required />
          <input name="place" placeholder="Lieu (optionnel)" />
          <input name="timeFrom" type="time" required />
          <input name="timeTo" type="time" required />
          <select name="status">
            <option value="ok">Pr√©sent</option>
            <option value="annule">Absent / Annul√©</option>
          </select>
          <button class="btn">Ajouter</button>
        </form>

        <table class="table" style="margin-top:12px">
          <thead><tr>
            <th>Date</th><th>Ville</th><th>Lieu</th><th>Horaires</th><th>Statut</th><th>Actions</th>
          </tr></thead>
          <tbody id="marketsList"></tbody>
        </table>
      </section>

      <!-- AVIS (mod√©ration simple) -->
      <section class="cardA">
        <h3>‚≠ê Avis en attente</h3>
        <div id="reviewsPending"></div>
      </section>
    </div>
  </main>

  <footer><div class="container">¬© <span id="year"></span> March√© Provence</div></footer>
  <script>document.getElementById('year').textContent=new Date().getFullYear()</script>

  <!-- Script admin -->
  <script type="module" src="admin.js"></script>
</body>
</html>
